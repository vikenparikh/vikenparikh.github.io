---
interface Project {
  name: string;
  description: string;
  link?: string;
  skills?: string[];
}

interface Props {
  project: Project;
  index: number;
  accentColor: string;
}

const { project, index, accentColor } = Astro.props;
const Component = project.link ? "a" : "div";
const linkProps = project.link
  ? {
      href: project.link,
      target: "_blank",
      rel: "noopener noreferrer",
    }
  : {};
---

<div class="group relative">
  <Component
    {...linkProps}
    class={`block relative p-6 sm:p-8 md:p-10 bg-white rounded-2xl border-4 border-transparent shadow-xl transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2
      ${project.link ? "hover:-translate-y-2 hover:border-gradient hover:shadow-2xl" : ""}`}
    style="border-image: linear-gradient(90deg, #2563eb 0%, #60a5fa 100%) 1;"

    <div class="space-y-8">
      <div class="flex items-center gap-4">
        <span
          class="text-lg font-mono bg-gradient-to-r from-blue-200 to-blue-400 text-blue-900 px-3 py-1 rounded shadow"
          style={{ color: accentColor }}
        >
          {String(index + 1).padStart(2, "0")}
        </span>
        <h3 class="text-2xl sm:text-3xl font-extrabold text-gray-900 tracking-tight mt-1 flex items-center gap-2">
          {project.name}
          {project.link && (
            <a
              href={project.link}
              target="_blank"
              rel="noopener noreferrer"
              class="ml-2 flex items-center justify-center text-blue-600 hover:text-blue-800 transition-colors duration-200"
              aria-label="GitHub Link"
            >
              {/* GitHub logo */}
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.167 6.839 9.489.5.092.682-.217.682-.483 0-.237-.009-.868-.013-1.703-2.782.604-3.369-1.342-3.369-1.342-.454-1.154-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.004.07 1.532 1.032 1.532 1.032.892 1.528 2.341 1.088 2.914.832.091-.647.35-1.088.636-1.339-2.221-.253-4.555-1.111-4.555-4.945 0-1.091.39-1.984 1.029-2.683-.103-.253-.447-1.272.098-2.65 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0 1 12 6.844c.851.004 1.707.115 2.507.337 1.909-1.294 2.748-1.025 2.748-1.025.546 1.378.202 2.397.1 2.65.64.699 1.028 1.592 1.028 2.683 0 3.842-2.337 4.688-4.565 4.938.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.749 0 .268.18.579.688.481C19.135 20.165 22 16.418 22 12c0-5.523-4.477-10-10-10z" />
              </svg>
            </a>
          )}
        </h3>
      </div>

      <p class={`text-lg sm:text-xl text-gray-700 leading-relaxed ${project.link ? "pr-12 sm:pr-14 md:pr-16" : ""} mt-4 mb-4 font-medium`}> 
        {project.description}
      </p>

      {project.skills?.length > 0 && (
        <div class="flex flex-wrap gap-3 pt-2">
          {project.skills.map((skill) => (
            <span
              class="px-4 py-1 bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 border border-blue-200 rounded-full text-sm font-semibold shadow-md"
              key={skill}
            >
              {skill}
            </span>
          ))}
        </div>
      )}
      {/* View Project button moved next to project name */}
    </div>
    <hr class="my-12 border-t-4 border-blue-200 rounded-full" />
  </Component>
</div>
