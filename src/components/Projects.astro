---
import { siteConfig } from "../config";
import ProjectCard from "./ProjectCard.astro";
// Identify featured AI projects by name
const featuredProjectNames = ["edumind-ai", "neuralverse-ai", "medmind-ai"];
const academicProjectNames = [
  "Analysis-of-Algorithms-Codes",
  "Data-Structures-Codes",
  "Artificial-Intelligence-Codes",
  "Machine-Learning-Implementation",
  "Shampoo-Sales-forecasting"
];

const featuredProjects = siteConfig.projects.filter(p => featuredProjectNames.includes(p.name));
const academicProjects = siteConfig.projects.filter(p => academicProjectNames.includes(p.name));
const regularProjects = siteConfig.projects.filter(
  p => !featuredProjectNames.includes(p.name) && !academicProjectNames.includes(p.name)
);
const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
---

{
  hasProjects && (
    <section id="projects" class="p-8 sm:p-12 md:p-16 lg:p-24">
      <div>
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-16 items-start">
          <div class="lg:col-span-4">
            <h2 class="text-3xl sm:text-4xl md:text-5xl xl:text-7xl font-bold text-gray-900">
              Projects
            </h2>
            <div
              class="w-[75px] h-[5px] mt-2 rounded-full"
              style={`background-color: ${siteConfig.accentColor}`}
            />
          </div>

          <div class="lg:col-span-8">
            <div class="space-y-8">
              {/* Featured Projects */}
              {featuredProjects.length > 0 && (
                <>
                  <h3 class="text-base font-semibold tracking-wide uppercase text-blue-700">Featured AI Projects</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {featuredProjects.map((project, index) => (
                      <ProjectCard project={project} index={index} accentColor={siteConfig.accentColor} />
                    ))}
                  </div>
                </>
              )}

              {/* Regular Projects */}
              {regularProjects.length > 0 && (
                <>
                  <h3 class="text-sm font-semibold tracking-wide uppercase text-gray-500 pt-4">Other Projects</h3>
                  {regularProjects.map((project, index) => (
                    <ProjectCard
                      project={project}
                      index={index + featuredProjects.length}
                      accentColor={siteConfig.accentColor}
                    />
                  ))}
                </>
              )}

              {/* Academic Projects Collapsible */}
              {academicProjects.length > 0 && (
                <>
                  <button
                    type="button"
                    class="mt-6 mb-2 px-4 py-2 rounded bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300 focus:outline-none"
                    onClick={() => {
                      const el = document.getElementById('academic-projects');
                      if (el) el.classList.toggle('hidden');
                    }}
                  >
                    Show Academic Projects
                  </button>
                  <div id="academic-projects" class="hidden">
                    <h3 class="text-sm font-semibold tracking-wide uppercase text-gray-500 pt-4">Academic Work</h3>
                    {academicProjects.map((project, index) => (
                      <ProjectCard
                        project={project}
                        index={index + featuredProjects.length + regularProjects.length}
                        accentColor={siteConfig.accentColor}
                      />
                    ))}
                  </div>
                </>
              )}
            </div>
          </div>
        </div>
      </div>
    </section>
  )
}
